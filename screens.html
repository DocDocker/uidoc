
<!DOCTYPE html>

<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>Экраны, переменные и события &#8212; документация SimpleUI 2.0.0</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/translations.js"></script>
    <link rel="index" title="Алфавитный указатель" href="genindex.html" />
    <link rel="search" title="Поиск" href="search.html" />
    <link rel="prev" title="Как это работает?" href="how_it_works.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>Экраны, переменные и события<a class="headerlink" href="#id1" title="Ссылка на этот заголовок">¶</a></h1>
<div class="section" id="id2">
<h2>Переменные, глобальные переменные и константы.<a class="headerlink" href="#id2" title="Ссылка на этот заголовок">¶</a></h2>
<p>Стек обычных переменных (структура) существует пока запущен процесс. Поместить переменную можно через структуру Переменные, установив имя и значение переменной. Также существуют специальные переменные (например GPS-координаты), управляющие переменные. Также переменные могут быть установлены через поля экрана или контейнера «Записывать в переменную». К такой переменной можно обратиться из кода и или вывести на экран(либо использовать в других местах, например в оффлайн) употребив префикс “&#64;”.
Но стек переменных перестает существовать когда процесс закрывается. При повторном открытии структура снова пустая.
Глобальные переменные  позволяют организовать общий стек переменных между процессами. Т.е. переменная может быть записана в одном процессе, а прочитана в другом, либо в том же при повторном открытии. Они существуют пока запущено приложение.
Работать с ними точно также только название самой переменной должно начинаться с «_», напрмиер “_var1”, “_var2”. Обращаться к ним по тому же имени. При обращении через экран это будет соотвественно “&#64;_var1”, “&#64;_var2”. Т.е. программа, если видит что название переменной начинается с символа подчеркивания – просто помещает их в отдельный стек переменных. Для программиста работа с такими переменными больше ничем не отличается
Константы позволяют записывать значения переменных в памяти устройства. Т.е. если закрыть и открыть приложение константа может быть прочитана снова. Таким образом можно организовать например настройки приложения. Поддерживаются строковые константы через которые можно выразить все остальное. Например в демо базе показана работа с флажком (флажок управляется строками “true” /’false”) и со строковой переменной. Но можно хранить и число.
Для установки константы нужно написать 2 подряд управлящие переменные <code class="docutils literal notranslate"><span class="pre">WriteVarString[номер]</span></code> и <code class="docutils literal notranslate"><span class="pre">WriteVarStringValue[номер]</span></code> , где номер – просто какой то номер. Суть в том что если надо вставить несколько констант за раз  то в Структуре они должны храниться отдельно, а если вставить несколько раз одинаковую переменную то останется только последнее значение. Поэтому надо написать что то типа</p>
<p><code class="docutils literal notranslate"><span class="pre">Переменные.Вставить(&quot;WriteVarString1&quot;,&quot;string_var1&quot;);</span></code>
<code class="docutils literal notranslate"><span class="pre">Переменные.Вставить(&quot;WriteVarStringValue1&quot;,Переменные.string_var1);</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Переменные.Вставить(&quot;WriteVarString2&quot;,&quot;cb&quot;);</span></code>
<code class="docutils literal notranslate"><span class="pre">Переменные.Вставить(&quot;WriteVarStringValue2&quot;,Переменные.cb);</span></code></p>
<p>Тут видно что в первых двух строчках устанавливается первая константа, в следующих двух – вторая. Константы записываются в хранилище устройства как “string_var1” и ‘cb’</p>
<p>Для чтения констант используется <code class="docutils literal notranslate"><span class="pre">ReadVarString[номер]</span></code>
Например ранее установленные константы:</p>
<p><code class="docutils literal notranslate"><span class="pre">Переменные.Вставить(&quot;ReadVarString1&quot;,&quot;string_var1&quot;);</span>
<span class="pre">Переменные.Вставить(&quot;ReadVarString2&quot;,&quot;cb&quot;);</span></code></p>
<p>Константы хранятся в том же хранилище что и константы приложения. Поэтому не следует называть их также как названы строковые константы приложения: “URL”, “User”, “Pass”, “Code”</p>
</div>
<div class="section" id="id3">
<h2>Обработка событий в он-лайн режиме<a class="headerlink" href="#id3" title="Ссылка на этот заголовок">¶</a></h2>
<p>Кнопки контейнеров, диалоги ввода, штрихкоды и другие управляющие элементы передают события которые можно использовать в алгоритмах. Как только происходит событие происходит запрос ввода либо обработка оффлайн события</p>
<p>В Переменные пишутся 2 переменные</p>
<blockquote>
<div><ul class="simple">
<li><p>event</p></li>
<li><p>listener</p></li>
</ul>
</div></blockquote>
<p>в <em>event</em> пишется тип события: Input (люой ввод – кнопки, штрихкоды и т.д.), onResult(экран диалога) и onStart(запуск экрана)
в <em>listener</em> пишется расшифровка- либо переменная (кнопка) либо зарезервированное название операции barcode, signature, photo</p>
<p>Допустим на экране размещен элемент экрана «Штрихкод» и указано «Записывать в переменную» - barcode. Тогда при сканировании штрихкода возникает событие ввода и посылается запрос котрый вызывает выполнение обработчика «Обработчик Online(Обработка ввода)»
Напрмиер, на первом экране вводится штрихкод и записывается в переменную barcode. После чего экран переключается и начинает работать обработчик. В обработчике записано</p>
<a class="reference internal image-reference" href="_images/txt_pic1.jpg"><img alt="_images/txt_pic1.jpg" class="align-center" src="_images/txt_pic1.jpg" style="width: 628.0px; height: 486.0px;" /></a>
<p>Тут видно, что берется переменная barcode (Переменные.barcode) и запросом ищется Номенклатура с таким штрих кодом. Далее, если все нормально то заполняются переменные nom, descr , nomRef, а если нет – то выводится сообщение об ошибке. Обратите внимание на то что в переменную nomRef записывается УникальныйИдентификатор чтобы потом когда надо будет эту номенклатуру заполнять в документ, ее можно было бы найти по ссылке
А с переменными descr и nom – все просто, раз они заданы в полях надписей, они будут показаны на последующих экранах:</p>
<a class="reference internal image-reference" href="_images/txt_pic2.jpg"><img alt="_images/txt_pic2.jpg" class="align-center" src="_images/txt_pic2.jpg" style="width: 845.0px; height: 382.0px;" /></a>
<p>И выглядеть это будет так:</p>
<a class="reference internal image-reference" href="_images/txt_pic3.jpg"><img alt="_images/txt_pic3.jpg" class="align-center" src="_images/txt_pic3.jpg" style="width: 270.0px; height: 480.0px;" /></a>
</div>
<div class="section" id="id4">
<h2>Обработка событий в самостоятельном режиме<a class="headerlink" href="#id4" title="Ссылка на этот заголовок">¶</a></h2>
<p>Действия пользователя и прочие события в самостоятельном режиме также порождают события. Команды, для обработки событий определяются на закладке Обработчик OFFline &amp; REST. Порядок команд как он задан в табличной части подразумевает порядок обработки событий.</p>
<a class="reference internal image-reference" href="_images/listener_offline.jpg"><img alt="_images/listener_offline.jpg" class="align-center" src="_images/listener_offline.jpg" style="width: 902.0px; height: 778.0px;" /></a>
<p>Для того чтобы по событию произошел запуск команды требуется в колонке Вид обработчика указать событие:</p>
<ul class="simple">
<li><p>Обработка ввода – любое событие ввод включая штрихкод</p></li>
<li><p>При открытии – при запуске экрана</p></li>
<li><p>Закрытие экрана – закрытие запускаемого экрана (экран диалога) . Подробнее в Запуск эрана диалога</p></li>
</ul>
<p>Для события «При запуске» уточнять тип события не нужно – оно всегда одно. А для события ввода могут быть разные события, фильтр по которым задается в колонке «Обработчик»:</p>
<p><strong>Пустое значение</strong> – нажатие кнопки «Далее» на навигационной панели</p>
<p><strong>«перемеренная»</strong> - нажатие кнопки или другого управляющего элемента(например списка значений) у которой стоит такая переменная. Например если в кнопке указать переменную btn_ok то при нажатии сгенерится событие с таким именем</p>
<p><strong>TableClick</strong> – клик по таблице</p>
<p><strong>BACK_BUTTON</strong> – кнопка назад на стандартной навигационной панели</p>
<p><strong>barcode, photo, photogallery, signature, spinner</strong> – события при обработке управляющих элементов (см. далее)</p>
<p><strong>Input1, Input2, Input3, InputDate</strong> -  события при обработке элементов упрощенного режима разметки</p>
<p>События можно перечислять через запятую (в т.ч. «пустую строку»), т.е. указав <code class="docutils literal notranslate"><span class="pre">“,barcode</span></code> - можно задать фильтр на события «Далее» и на сканирование штрихкода.</p>
<p>Действия по обработки события задаются с помощью поля Вид действия и других связанных полей</p>
<p>Условный переход в самостоятельном режиме. Когда строки команд добавляются в табличную часть им назначается номер. Для некоего события можно указать  Вид действия – «Проверить условие». Тогда при выполнении этой команды будет проверено условие и выполнится либо команды, перечисленные в поле «Тогда» , либо в «Иначе». Там перечисляются номера строк, через запятую, которые должны выполнится. Условие может быть люой сложности и задано в синтаксисе Java. При этом переменные задаются в обрамлении &#64;имя_переменной&#64;, например &#64;a&#64;&gt;5 – будет проверяться выражение a&gt;5. Или например &#64;a&gt;5&#64;&amp;&amp;&#64;a&#64;&lt;=10 будет проверяться a&gt;5 и a&lt;=10</p>
<a class="reference internal image-reference" href="_images/bool_expression.jpg"><img alt="_images/bool_expression.jpg" class="align-center" src="_images/bool_expression.jpg" style="width: 1157.0px; height: 428.0px;" /></a>
</div>
<div class="section" id="id5">
<h2>Общие элементы экранов<a class="headerlink" href="#id5" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id6">
<h3>Сообщение об ошибке<a class="headerlink" href="#id6" title="Ссылка на этот заголовок">¶</a></h3>
<p>В режиме тонкого клиента заполнение переменной СообщениеОбОшибке вызывает прерываение процесса и показ надписи в текстом ошибки внизу экрана. В оффлайн режиме аналогом этого события является наступление ошибки при заполненном поле «Сообщение об ошибке»</p>
</div>
<div class="section" id="id7">
<h3>Управляющие элементы экранов (запуск действий с парящих кнопок)<a class="headerlink" href="#id7" title="Ссылка на этот заголовок">¶</a></h3>
<div class="section" id="id8">
<h4>Сканирование штрихкода с камеры и с аппаратного сканера<a class="headerlink" href="#id8" title="Ссылка на этот заголовок">¶</a></h4>
<p>Елси на экране требуется распознавание штрихкода, то необходимо добавить на экран элемент «Штрих-код» и указать переменную, в которую он будет записываться по факту сканирования.</p>
<p>Если на устройстве есть аппаратный сканер, желательно указать галочку «Аппаратный сканер» в настройках. В противном случае на экране будет присутствовать кнопка сканирования через камеру устройства. Соответственно, при сканировании через камеру при добавлении элемента Штрих-код подраздумевается что будет нажиматься парящая кнопка. Также в настройках можно включить подсветку.
Также при использовании Bluetooth сканеров в режиме SSP сопряжения необходимо активировать Использовать Bluetooth и выбрать устройство и суффикс (это все обычно программируется на устройстве штрих-кодами из инструкции). Bluetooth сканеры обычно могут работать и в режиме HID но в таком случае на экране нельзя размещать другие элементы ввода – они будут перехватывать строку.
Аппаратный сканер ТСД должен быть запрограммирован в режиме HID (в разрыв клавиатуры) с суффиксом CR/LF на конце.</p>
</div>
<div class="section" id="id9">
<h4>Передача картинки на устройство<a class="headerlink" href="#id9" title="Ссылка на этот заголовок">¶</a></h4>
<p>На экране может быть выведена картинка на том месте где находится поле описания. Рекомендую не выводить одновременно с картинкой поле описание, чтобы оставить для нее место.
В составе этот элемент называется «Картинка»
Картинка передается через обычную переменную в виде строки Base64. Так как 1С может добавлять лишние символы, их надо убрать</p>
<p><code class="docutils literal notranslate"><span class="pre">Картинка</span> <span class="pre">=</span> <span class="pre">Новый</span> <span class="pre">Картинка(&quot;C:\Users\Дмитрий\Pictures\хорь.jpg&quot;);</span>
<span class="pre">СтрокаBase64</span> <span class="pre">=Base64Строка(Картинка.ПолучитьДвоичныеДанные());</span>
<span class="pre">//Для</span> <span class="pre">1С</span> <span class="pre">это</span> <span class="pre">надо</span> <span class="pre">делать</span> <span class="pre">обязательно,</span> <span class="pre">иначе</span> <span class="pre">картинка</span> <span class="pre">невалидная</span>
<span class="pre">СтрокаBase64</span> <span class="pre">=</span> <span class="pre">СтрЗаменить(СтрокаBase64,</span> <span class="pre">Символы.ВК,</span> <span class="pre">&quot;&quot;);</span>
<span class="pre">СтрокаBase64</span> <span class="pre">=</span> <span class="pre">СтрЗаменить(СтрокаBase64,</span> <span class="pre">Символы.ПС,</span> <span class="pre">&quot;&quot;);</span>
<span class="pre">Переменные.Вставить(&quot;image&quot;,СтрокаBase64);</span></code></p>
</div>
<div class="section" id="id10">
<h4>Прием картинки с камеры (фотографирование)<a class="headerlink" href="#id10" title="Ссылка на этот заголовок">¶</a></h4>
<p>В составе экрана можно разместить элемент «Фото с камеры» , тогда на экране появится кнопка камеры. И это изображение можно передавать в переменную base64. В демо базе есть простой пример по приему изображений.</p>
</div>
<div class="section" id="id11">
<h4>Ввод картинки из галерии<a class="headerlink" href="#id11" title="Ссылка на этот заголовок">¶</a></h4>
<p>Аналогично фотографированию, только ввод - из галереии устройства. Для этого надо расположить элемент «Фото из галереи» и задать переменную в которую будет писаться.</p>
</div>
<div class="section" id="id12">
<h4>Ввод подписи<a class="headerlink" href="#id12" title="Ссылка на этот заголовок">¶</a></h4>
<p>Добавлена возможность ввода изображения подписи с экрана (пользователь рисует свою подпись на экране) и передача этой подписи в 1С в виде картинки
Для этого необходимо поместить элемент «Подпись» на экран и задать переменную
В демо базе появился пример процесса «Пример подпись»</p>
</div>
<div class="section" id="id13">
<h4>Голосовой ввод<a class="headerlink" href="#id13" title="Ссылка на этот заголовок">¶</a></h4>
<p>Элемент экрана «Голосовой ввод» осуществляет запуск распознавания речи от Google (на устройстве должны быть сервисы Google и интернет). Распознанная строка передается в переменную, котрую вы определите в экране.</p>
</div>
<div class="section" id="id14">
<h4>Распознавание текста<a class="headerlink" href="#id14" title="Ссылка на этот заголовок">¶</a></h4>
<p>Для использования распознавания текста нужно поместить на экран элемент «Распознавание текста» и заполнить «Настройка распознавания» (обязательно!). Распознавание работает оффлайн. Распознаются буквы и символы толкьо в латинской раскладке и цифры.
При распознавании строка подбирается из таблице БД на устройстве, т.е. чтобы обеспечить работу этого механизма нужно либо создать таблицу и передать туда объекты либо использовать документы (documents). Например вам нужно обеспечить поиск по товарам по артикулам на рабочем месте. Вы создаете (например через закладку конфигурации «Offline при старте») таблицу «Create table goods if not exist…”, выгружаете туда товары (примеры взаимодействия есть в демо-базе. В товарах должна быть колонка по которой сверять распознанные строки (например артикул)
В настройке распознавания как минимум надо определить запрос к таблице, поле которое будет проверяться по результатам распознавания и настройку соответствия для заполнения переменных полями таблицы. Напрмиер в приведенном примере поиск идет по полю  таблицы field2 , и в случае успеха заполняются переменные field1,doc и field2
Также для повышения точности поиска можно повысить количество измерений и процент совпадений (минимальная средняя частота). Т.е. например если поставить измерений 10 и частоту 75 то количество измерений будет как минимум 10 (или больше) а победитель должен будет иметь процент совпадений не менее 75%</p>
<a class="reference internal image-reference" href="_images/recognize.jpg"><img alt="_images/recognize.jpg" class="align-center" src="_images/recognize.jpg" style="width: 679.0px; height: 557.0px;" /></a>
</div>
</div>
</div>
<div class="section" id="id15">
<h2>Прочие элементы интерфейса<a class="headerlink" href="#id15" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id16">
<h3>Синтез речи<a class="headerlink" href="#id16" title="Ссылка на этот заголовок">¶</a></h3>
<p>Вывод экрана может сопровождать воспроизведение голосом текста. Текст можно задавать в переменной или непосредственно. Для этого нужно разместить на экране элемент «Голос»</p>
<a class="reference internal image-reference" href="_images/speak.jpg"><img alt="_images/speak.jpg" class="align-center" src="_images/speak.jpg" style="width: 717.0px; height: 428.0px;" /></a>
</div>
<div class="section" id="id17">
<h3>Звуковой сигнал<a class="headerlink" href="#id17" title="Ссылка на этот заголовок">¶</a></h3>
<p>Можно воспроизвести «бип» - один из 100, заложенный в Андроиде, если присвоить в переменную <code class="docutils literal notranslate"><span class="pre">beep</span></code> значение от 1 до 99, либо оставить пустой - тогда будет звук по умолчанию. Это работает и в онлайн и в оффлай (через присвоение переменных). Пример в базе.
Примеры звуков есть тут:<a class="reference external" href="https://developer.android.com/reference/android/media/ToneGenerator#TONE_CDMA_ABBR_REORDER">https://developer.android.com/reference/android/media/ToneGenerator#TONE_CDMA_ABBR_REORDER</a>
В онлайн:</p>
<p><code class="docutils literal notranslate"><span class="pre">Переменные.Вставить(&quot;beep&quot;,&quot;&quot;);</span></code></p>
<p>В оффлайн:</p>
<a class="reference internal image-reference" href="_images/beep.jpg"><img alt="_images/beep.jpg" class="align-center" src="_images/beep.jpg" style="width: 1170.0px; height: 373.0px;" /></a>
</div>
<div class="section" id="id18">
<h3>Функции авторизации и загрузки конфигурации.<a class="headerlink" href="#id18" title="Ссылка на этот заголовок">¶</a></h3>
<p>Можно организовать экран входа в систему котрый будет запускаться при запуске приложения и пункт основного меню для перелогинивания.  Для того чтобы процесс запускался при входе в приложение нужно поставить галочку «Запустить при старте»</p>
<p>Для того, чтобы произошла загрузка нужной конфигурации нужно заполнить переменную «ID» кодом справочника Мобильные клиенты, нужного клиента. Это тот же код который указывается в настройках. Если с терминалом будут работать несколько человек, можно создать конфигурацию, содержащую толкьо процесс «Логин» , и другие клиенты будут подгружаться из нее.
Также процесс с логином можно добавить во все конфигурации клиентов, в которых нужно перелогиниваться (совместное использование одного терминала)</p>
<a class="reference internal image-reference" href="_images/scr_login.jpg"><img alt="_images/scr_login.jpg" class="align-center" src="_images/scr_login.jpg" style="width: 724.0px; height: 447.0px;" /></a>
</div>
</div>
<div class="section" id="id19">
<h2>Режим разметки экрана контейнерами (рекомендуется)<a class="headerlink" href="#id19" title="Ссылка на этот заголовок">¶</a></h2>
<p>На экранах можно разместить произвольное количество элементов, определив их положение и оформление. Пример произвольной разметки приведен в демо базе в конфигурации «Примеры Simple UI»
Для этого используются <strong>Контейнеры</strong>.</p>
<div class="admonition attention">
<p class="admonition-title">Внимание</p>
<p>На экране могут быть либо контейнеры либо упрощенный режим – одновременно они работать не могут так как занимают весь экран. Если вы хотите использовать режим разметки то нужно поместить на экран элемент «Контейнер» и указать тип контейнера а в него уже поместить все остальные визуальные элементы</p>
</div>
<a class="reference internal image-reference" href="_images/containers_ex.jpg"><img alt="_images/containers_ex.jpg" class="align-center" src="_images/containers_ex.jpg" style="width: 536.0px; height: 356.0px;" /></a>
<p>Контейнеры – это группы элементов. Они могут располагаться либо горизонтально либо вертикально. Ориентация - обязательное свойство.
Также обязательно нужно  указать ширину и высоту. При этом ширину и высоту можно указать в числах, а можно в виде варианта «На весь экран» или «По размеру элементов». На весь экран означает что контейнер будет стараться занять в данном направлении всю площадь до конца экрана (по ширине или по высоте). По размеру элементов – его ширина или высота будет равна сумме размеров элементов.
При этом в контейнере может быть размещено несколько контейнеров. Если каждый из них «По размеру элементов» - то просто будут следовать друг за другом.
Если допустим каждый из них «На весь экран» и не указан «Вес» то первый контейнер займет весь экран и ничего больше не будет видно. Это нормальное поведение для Андроид. Чтобы было видно все контейнеры нужно им назначить «Вес». Допустим нам надо поделить контейнер на 2 равные части по горизонтали. Тогда у каждого нужно поставить Вес=1 и ширину «На весь контейнер». Если допустим нужно один сделать меньше другого в 2 раза то вес нужно поставить 2 у того который больше  - Вес 1 (чем больше вес тем меньше размер – это знаменатель). Сами числа тут не важны – важно соотношение.</p>
<div class="section" id="id20">
<h3>Элементы контейнера<a class="headerlink" href="#id20" title="Ссылка на этот заголовок">¶</a></h3>
<p>Контейнеры включают в себя собственные визуальные элементы. При этом невизуальные – Голос, ШтрихКод и т.д. могут быть в экране помимо корневого контейнера и использоваться. Обработка переменных происходит в обработчиках экранов. Сколько бы не было вложенных контейнеров все обработчики – в экране.</p>
<dl class="simple">
<dt>Элементы контейнера отличаются следующими свойствами:</dt><dd><ul class="simple">
<li><p>их может быть неограниченное количество каждого типа</p></li>
<li><p>на каждый из них может быть задано собственное оформление</p></li>
<li><p>для кнопок есть галочка «Не обновлять экран» - происходит только отправка запроса или выполнение офлайн обработчика. Перерисовка не происходит</p></li>
<li><p>для полей ввода можно задавать предопределенные значения</p></li>
</ul>
</dd>
</dl>
<p><strong>Оформление</strong> – это справочник. По сути соответствует «стилям». Т.е. разные элементы могут использовать один и тот же элемент «Оформление».</p>
<a class="reference internal image-reference" href="_images/style_ex.jpg"><img alt="_images/style_ex.jpg" class="align-center" src="_images/style_ex.jpg" style="width: 558.0px; height: 529.0px;" /></a>
<p>Оформление включат в себя элементы «Высота», «Ширина» и «Вес» - они полностью аналогичны контейнерам. Т.е. например если поставить у кнопки ширину и высоту «На весь контейнер» то она займет весь контейнер.
Также элементы оформления
Цвет фона, цвет текста – установка цветов в HEX кодировке вместе с символом #. Посмотреть палитру можно в интернете. Андроид рекомендует использовать «матириал» цвета например с ними удобно работать вот тут : <a class="reference external" href="https://materialuicolors.co/">https://materialuicolors.co/</a> . Тут прямо можно копировать и вставлять в поля.
Размер текста – числовой размер текста
Выравнивание – Лево, Право, Центр. Выравнивание зависит от ширины и высоты. Например если надпись в контейнере котрый «По размеру элементов» по ширине, то от установки выранивания «По центру» ничего не изменится. Но если  вам надо расположить надпись по центру экрана – вам надо сделать размер контейнера «На весь контейнер» по ширине и поставить Выравнивание «По центру»
Иконка – выбор из нескольких иконок для кнопок.</p>
<p>Для элементов контейнера можно определить условную видимость(поле «Скрыть по условию») – переменную, в которой если будет присвоена строка “true” то этот элемент будет скрыт</p>
<a class="reference internal image-reference" href="_images/hide_ex.jpg"><img alt="_images/hide_ex.jpg" class="align-center" src="_images/hide_ex.jpg" style="width: 249.0px; height: 176.0px;" /></a>
<p>Виды элементов контейнера:</p>
<p><strong>Контейнер</strong> – вложенный контейнер</p>
<p><strong>Картинка</strong> – картинка в виде строки base 64. Работа аналогична картинкам обычного экрана</p>
<p><strong>Диаграмма</strong> – диаграмма типа «Круговая», «Столбики» и «Линейная». Установка столбцовой и линейной диаграммы возможна по сериям. Установка значений производится путем передачи json строки и показана в «Примеры Simple UI #2»</p>
<p><strong>Индикатор</strong> – индикатор со своей шкалой. Возможна установка минимального и максимального значения, границ красной, желтой и зеленой зон и самого значения. Установка происходит через передачу json строки. Пример формата с комментариями – в демо базе «Примеры Simple UI #2»</p>
<p><strong>Список</strong> – выпадающий список</p>
<p><strong>Таблица</strong> – таблица на экране. Может быть несколько таблиц расположенных как угодно</p>
<p><strong>Надпись</strong> – их может быть сколько угодно с любым оформлением</p>
<p><strong>Кнопка</strong> – в отличии от «упрощенного режима» кнопки не располагаются в блоках а добавляются по одной и каждая вызывает событие при нажатии.</p>
<p><strong>Поле ввода число</strong> и <strong>Поле ввода строка</strong> – может быть произвольное количество полей. В отличии от упрощенного режима «Поле ввода» не имеет заголовка. Если нужен заголовок – то рядом нужно поместить «Надпись»
В «Заполнение поля» можно поместить значение или переменную для начального заполнения</p>
<p><strong>Флажок</strong> – логическое значение. В Переменные записывается “true”/”false” - именно в строковом виде.</p>
<p><strong>Документ</strong> – можно использовать в качестве поля ввода любой тип документов. В случае использования документа нужно указать «Тип документа» , например «Клиенты». В переменные пишется json выбранного документа.</p>
<a class="reference internal image-reference" href="_images/docs_in_screens.jpg"><img alt="_images/docs_in_screens.jpg" class="align-center" src="_images/docs_in_screens.jpg" style="width: 869.0px; height: 460.0px;" /></a>
</div>
<div class="section" id="id21">
<h3>Скрытие панелей кнопок<a class="headerlink" href="#id21" title="Ссылка на этот заголовок">¶</a></h3>
<p>В процессе можно указать галочку «Скрыть панель кнопок» - тогда нижняя панель будет скрыта</p>
</div>
</div>
<div class="section" id="id22">
<h2>Упрощенный режим разметки экрана<a class="headerlink" href="#id22" title="Ссылка на этот заголовок">¶</a></h2>
<p>Упрощенный режим (без контейнеров), предполагает что каждый экран имеет некий шаблон структуры. Это неплоха работает на классических WMS.
Справочник экраны содержит структуру элементов показываемых на экране. В приложении элементы скомпонованы таким образом:</p>
<a class="reference internal image-reference" href="_images/struct_old.jpg"><img alt="_images/struct_old.jpg" class="align-center" src="_images/struct_old.jpg" style="width: 400.0px; height: 664.0px;" /></a>
<p>Экран может содержать следующие элементы (вид элемента задаётся в колонке «Вид элемента экрана», кроме ошибки)</p>
<p><strong>Надпись, описание, ошибка, поле описание</strong> – это нередактируемые надписи на экране.</p>
<p><strong>Надпись1, Надпись2 и Надпись3</strong> вместе с заголовками находятся в верхней части.</p>
<p>В колонке «Заполнение поля» указывается какой текст будет выведен. Это может быть просто строка надписи, а может быть переменная, передаваемая из обработчика. Переменные задаются с префиксом &#64;. Например на картинке в поле «Надпись1» указана переменная &#64;addr – это значит что на экране ввода адреса, в обработчике в нее заполняется отсканированный адрес.
Для надписей Надпись1, Надпись2 и Надпись3 имеет смысл колонка «Доп. заголовок» - это сиреневые заголовки над надписями
Если на экране должен быть доступен ввод штрихкода то нужно добавить «Штрихкод» в любое место. Если используется аппаратный сканер (галочка в настройках) то значка камеры не будет видно, но будет ожидание сканирования. Штрих-коды должны быть в разрыв клавиатуры (HID) с префиксом #13. Если не аппаратный сканер то будет доступна кнопка камеры.
Если необходимо по событию ввода сразу переключать экран, то надо поставить галку «Переключаться по окончанию ввода». Тогда н надо будет нажимать кнопку «Далее»</p>
<a class="reference internal image-reference" href="_images/old_pic2.jpg"><img alt="_images/old_pic2.jpg" class="align-center" src="_images/old_pic2.jpg" style="width: 1164.0px; height: 588.0px;" /></a>
<p>Поля ввода бывают двух видов <strong>«Ввод числа»</strong> , <strong>«Ввод строки»</strong> Доступно до 3х полей ввода на одном экране. Их можно комбинировать с Штрих кодом. Например есть пример поиска заказа по штрих-коду и номеру – в демо базе экран Поиск заказа.
У поля ввода заголовок задается в «Заполнении поля». Доп. заголовка у полей ввода нет.</p>
<a class="reference internal image-reference" href="_images/old_pic3.jpg"><img alt="_images/old_pic3.jpg" class="align-center" src="_images/old_pic3.jpg" style="width: 603.0px; height: 428.0px;" /></a>
<p><strong>Поле ввода «Дата»</strong> - доступно одно поле ввода даты на экране.</p>
<p><strong>Диалог и показ по условию</strong> На экране можно разместить диалог с кнопками «Да» и «Нет» и получить результат выбора пользователя. После того как пользователь нажимает одну из кнопок, диалог исчезает и в переменную записывается значение выбора «true» (если выбрано «Да») или «false» если выбрано «Нет» . В демо базе это есть на экране «Результаты поиска заказа». Вот как это может быть обработано:</p>
<p><code class="docutils literal notranslate"><span class="pre">Если</span>&#160; <span class="pre">Переменные.result=&quot;true&quot;</span> <span class="pre">Тогда</span> <span class="pre">//пользователь</span> <span class="pre">ответил</span> <span class="pre">«Да»</span>
<span class="pre">НовДок</span> <span class="pre">=</span> <span class="pre">Документы.ЗаказПокупателя.СоздатьДокумент();</span>
<span class="pre">НовДок.Дата</span> <span class="pre">=</span> <span class="pre">ТекущаяДата();</span>
<span class="pre">НовДок.Записать();</span>
<span class="pre">Переменные.Вставить(&quot;order&quot;,СокрЛП(НовДок));</span>
<span class="pre">КонецЕсли;</span></code></p>
<p>Для диалога может быть задано условие показа. Если в эту переменную установить “true” то диалог будет показан, если false то нет. Естественно это должно быть задано до показа экрана в одном из обработчиков.</p>
<p>Элемент управления <strong>«Список значений»</strong> Работу с этим элементом демонстрирует пример в демо-базе. Можно заполнять значения списка непосредственно, либо через переменную. Единственное правило – они должны быть через точку с запятой. По определенным причинам связанным с андроидом первым элементом списка нужно сделать либо пустое поле(пробел) либо что то типа «Выберите…». Первый элемент не будет выбираться – остальные будут. В переменную передается строковое значение списка.</p>
<p>Элемент управления <strong>«Список кнопок»</strong> Элемент управления может разместить одну или несколкьо кнопок не экране и передать в базу нажатую кнопку. Для обработки сразу по нажатию надо поставить «Переключаться по нажатию кнопки» как и везде. Работа с данным элементов в принципе аналогична работе со «Список значений» - отличается только способ отображения</p>
<p>Элемент экрана <strong>«Список кнопок горизонтально»</strong> Этот элемент полностью аналогичен элементу «Список кнопок», за исключением того что кнопки выводятся горизонтально в строку</p>
<p>Элемент управления <strong>«Повтор экрана»</strong> Иногда требуется оставаться на экране но отсылать запросы в базу. Например ждать когда поймаются спутники или пропустить задание и получить следующее. Для этого можно использовать элемент экрана «Повтор экрана». По середине экрана будет выведена желтая кнопка с текстом который вы указываете в конструкторе. При нажатии на нее происходит отправка запроса как при нажатии кнопки Далее и больше ничего – т.е. экран не меняется.</p>
</div>
<div class="section" id="simple-ui">
<h2>Переключение экранов Simple UI<a class="headerlink" href="#simple-ui" title="Ссылка на этот заголовок">¶</a></h2>
<p>В процессе умолчанию указана галка «Произвольный запуск экранов» У каждого экрана в таком случае будет необходимо прописать действия для переключения или вызова других экранов. Иначе экран просто будет оставаться неподвижным. Даже если не отключена стандартная панель кнопок.
Переключение может происходить через стандартную панель и также можно сделтаь свои кнопки и определить обработчики в них. Собственно говоря как такового «переключения» может не быть – многие приложения состоят из одного экрана, а остальные экраны вызываются по необходимости
Порядок переключения может быть определен через обрабтчики кнопок или стандартных элементов с помощью команды «ShowScreen». Например</p>
<p><code class="docutils literal notranslate"><span class="pre">Переменные.Вставить(&quot;ShowScreen&quot;,&quot;Экран</span> <span class="pre">2</span> <span class="pre">стандартные</span> <span class="pre">кнопки&quot;);</span></code></p>
<p>Также как альтернатива определить <strong>обработчики в разделе OFF-Line &amp; REST</strong>. Это подойдет как для самостоятельных приложений так и просто для удобства (если например не надо писать условия для переключения экранов, а нужно сделать это безусловно)</p>
<a class="reference internal image-reference" href="_images/command_showscreen.jpg"><img alt="_images/command_showscreen.jpg" class="align-center" src="_images/command_showscreen.jpg" style="width: 885.0px; height: 222.0px;" /></a>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">SimpleUI</a></h1>








<h3>Навигация</h3>
<p class="caption"><span class="caption-text">Содержание:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">О платформе</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_it_works.html">Как это работает?</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Экраны, переменные и события</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">Переменные, глобальные переменные и константы.</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">Обработка событий в он-лайн режиме</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">Обработка событий в самостоятельном режиме</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">Общие элементы экранов</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id6">Сообщение об ошибке</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Управляющие элементы экранов (запуск действий с парящих кнопок)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">Сканирование штрихкода с камеры и с аппаратного сканера</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">Передача картинки на устройство</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">Прием картинки с камеры (фотографирование)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">Ввод картинки из галерии</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">Ввод подписи</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">Голосовой ввод</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">Распознавание текста</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id15">Прочие элементы интерфейса</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id16">Синтез речи</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">Звуковой сигнал</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id18">Функции авторизации и загрузки конфигурации.</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id19">Режим разметки экрана контейнерами (рекомендуется)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id20">Элементы контейнера</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">Скрытие панелей кнопок</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id22">Упрощенный режим разметки экрана</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-ui">Переключение экранов Simple UI</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="how_it_works.html" title="предыдущая глава">Как это работает?</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Быстрый поиск</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Искать" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Dmitry Vorontsov.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/screens.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>